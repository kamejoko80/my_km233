<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!-- saved from url=(0055)http://linuxwireless.org/en/users/Documentation/hostapd -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="robots" content="index,follow">

<title>hostapd - Linux Wireless</title>
<script type="text/javascript" src="./hostapd - Linux Wireless_files/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="./hostapd - Linux Wireless_files/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="./hostapd - Linux Wireless_files/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="./hostapd - Linux Wireless_files/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="./hostapd - Linux Wireless_files/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin/linuxwireless/css/msie.css">
<![endif]-->




<link rel="shortcut icon" href="http://linuxwireless.org/favicon.png" type="image/png">

<link rel="Start" href="http://linuxwireless.org/welcome">
<link rel="Alternate" title="Đánh dấu kiểu wiki" href="http://linuxwireless.org/en/users/Documentation/hostapd?action=raw">
<link rel="Alternate" media="print" title="Xem bản in" href="http://linuxwireless.org/en/users/Documentation/hostapd?action=print">
<link rel="Up" href="http://linuxwireless.org/en/users/Documentation">
<link rel="Search" href="http://linuxwireless.org/FindPage">
<link rel="Index" href="http://linuxwireless.org/TitleIndex">
<link rel="Glossary" href="http://linuxwireless.org/WordIndex">
<link rel="Help" href="http://linuxwireless.org/HelpOnFormatting">
<script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/document_iterator.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/find_proxy.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/get_html_text.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/global_constants.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/name_injection_builder.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/number_injection_builder.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/string_finder.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/change_sink.js"></script><meta name="document_iterator.js"><meta name="find_proxy.js"><meta name="get_html_text.js"><meta name="global_constants.js"><meta name="name_injection_builder.js"><meta name="number_injection_builder.js"><meta name="string_finder.js"><meta name="change_sink.js"></head>

<body lang="vi" dir="ltr">
<div id="all">
<div id="nbtm0" class="navibtm" style="left: 243px;"><a href="http://linuxwireless.org/en/users">users</a></div><div id="ntop0" class="navitop" style="left: 243px;"></div><div class="navitxtbg" style="left: 243px;"></div><div id="ntxt0" class="navitxt" style="left: 243px;"><ul id="ni0" class="navi_items"><li><a href="http://linuxwireless.org/en/users/Support">Support</a></li><li><a href="http://linuxwireless.org/en/users/Drivers">Drivers</a></li><li><a href="http://linuxwireless.org/en/users/Devices">Devices</a></li><li><a href="http://linuxwireless.org/en/users/Download">Download</a></li><li><a href="http://linuxwireless.org/en/users/Documentation">Documentation</a></li></ul></div><div id="nbtm1" class="navibtm" style="left: 391px;"><a href="http://linuxwireless.org/en/vendors">vendors</a></div><div id="nbtm2" class="navibtm" style="left: 539px;"><a href="http://linuxwireless.org/en/developers">developers</a></div>
<div id="header"><a id="headerlink" href="http://linuxwireless.org/"></a></div>
<div id="search"><form method="get" action="http://linuxwireless.org/search"><input type="hidden" name="action" value="fullsearch"><input type="hidden" name="titlesearch" value="0"><input type="text" name="value" size="20" placeholder="search"></form></div>
<div id="page" lang="en" dir="ltr">
<div id="pagecontent">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><p class="line867"></p><div class="table-of-contents"><p class="table-of-contents-heading">Contents</p><ol><li>
<a href="http://linuxwireless.org/en/users/Documentation/hostapd#hostapd_Linux_documentation_page">hostapd Linux documentation page</a><ol><li>
<a href="http://linuxwireless.org/en/users/Documentation/hostapd#About_hostapd">About hostapd</a></li><li>
<a href="http://linuxwireless.org/en/users/Documentation/hostapd#Getting_hostapd">Getting hostapd</a><ol><li>
<a href="http://linuxwireless.org/en/users/Documentation/hostapd#Using_your_distributions_hostapd">Using your distributions hostapd</a></li><li>
<a href="http://linuxwireless.org/en/users/Documentation/hostapd#Download_and_compile_hostapd">Download and compile hostapd</a></li></ol></li><li>
<a href="http://linuxwireless.org/en/users/Documentation/hostapd#Configuring_hostapd">Configuring hostapd</a><ol><li>
<a href="http://linuxwireless.org/en/users/Documentation/hostapd#Establishing_Baseline_for_Configuration">Establishing Baseline for Configuration</a></li><li>
<a href="http://linuxwireless.org/en/users/Documentation/hostapd#Common_Options">Common Options</a><ol><li>
<a href="http://linuxwireless.org/en/users/Documentation/hostapd#Wireless_Interface">Wireless Interface</a></li><li>
<a href="http://linuxwireless.org/en/users/Documentation/hostapd#Wireless_Environment">Wireless Environment</a></li></ol></li><li>
<a href="http://linuxwireless.org/en/users/Documentation/hostapd#Authentication_and_Encryption">Authentication and Encryption</a></li><li>
<a href="http://linuxwireless.org/en/users/Documentation/hostapd#Additional_Options">Additional Options</a></li><li>
<a href="http://linuxwireless.org/en/users/Documentation/hostapd#Extra_Options">Extra Options</a><ol><li>
<a href="http://linuxwireless.org/en/users/Documentation/hostapd#Dynamic_VLAN_tagging">Dynamic VLAN tagging</a></li></ol></li></ol></li></ol></li></ol></div> <span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><p class="line867">
</p><h1 id="hostapd_Linux_documentation_page">hostapd Linux documentation page</h1>
<span class="anchor" id="line-4"></span><p class="line867">
</p><h2 id="About_hostapd">About hostapd</h2>
<span class="anchor" id="line-5"></span><p class="line862">Homepage: <a class="http" href="http://w1.fi/hostapd/">http://w1.fi/hostapd/</a> <span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span></p><p class="line862">hostapd is an <em>IEEE 802.11 AP and IEEE 802.1X/WPA/WPA2/EAP/RADIUS Authenticator</em>.  This page is dedicated to the Linux documentation of it's implementation and use. Please refer to the hostapd home page for information for other Operating Systems. <span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span></p><p class="line862">As far a Linux is concerned, out of the <strong>old</strong> drivers you can only use these 3 drivers with hostapd: <span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span></p><ul><li><p class="line891"><a class="nonexistent" href="http://linuxwireless.org/en/users/Drivers/hostap">HostAP</a> <span class="anchor" id="line-12"></span></p></li><li><p class="line891"><a href="http://linuxwireless.org/en/users/Drivers/madwifi">madwifi</a> <span class="anchor" id="line-13"></span></p></li><li><p class="line891"><a class="nonexistent" href="http://linuxwireless.org/en/users/Drivers/prism54">prism54</a> <span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span></p></li></ul><p class="line862">All <strong>new</strong> mac80211 based drivers that implement AP functionality are supported with hostapd's <strong><a href="http://linuxwireless.org/en/developers/Documentation/nl80211">nl80211</a></strong> driver. <span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span></p><p class="line862">The mac80211 subsystem moves all aspects of master mode into user space.  It depends on hostapd to handle authenticating clients, setting encryption keys, establishing key rotation policy, and other aspects of the wireless infrastructure.  Due to this, the old method of issuing 'iwconfig &lt;wireless interface&gt; mode master' no longer works.  Userspace programs like hostapd now use netlink (the nl80211 driver) to create a master mode interface for your traffic and a monitor mode interface for receiving and transmitting management frames. <span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span></p><p class="line867">
</p><h2 id="Getting_hostapd">Getting hostapd</h2>
<span class="anchor" id="line-20"></span><p class="line867">
</p><h3 id="Using_your_distributions_hostapd">Using your distributions hostapd</h3>
<span class="anchor" id="line-21"></span><p class="line874">It is advisable to try your distributions version of hostapd before taking the time to compile and install your own copy.  This will make future maintenance easier as you'll be able to use the init scripts shipped by the distro and hostapd will be updated by it as well.  If your distribution ships 0.6.8 or later, you can test with this bare minimum config by creating the file hostapd-minimal.conf: <span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span></p><p class="line867"><span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span><span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span></p><pre><span class="anchor" id="line-1"></span>#change wlan0 to your wireless device
<span class="anchor" id="line-2"></span>interface=wlan0
<span class="anchor" id="line-3"></span>driver=nl80211
<span class="anchor" id="line-4"></span>ssid=test
<span class="anchor" id="line-5"></span>channel=1</pre><span class="anchor" id="line-30"></span><p class="line874">If that config errors out with something like: <span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span></p><p class="line867"><span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span><span class="anchor" id="line-37"></span></p><pre><span class="anchor" id="line-1-1"></span>hostapd $ sudo hostapd ./hostapd-minimal.conf
<span class="anchor" id="line-2-1"></span>Configuration file: ./hostapd-minimal.conf
<span class="anchor" id="line-3-1"></span>Line 2: invalid/unknown driver 'nl80211'
<span class="anchor" id="line-4-1"></span>1 errors found in configuration file './hostapd-minimal.conf'</pre><span class="anchor" id="line-38"></span><p class="line874">that means that your distro is not shipping hostapd with nl80211 driver support and you'll need to follow the building instructions that follow.  If it works, you can skip down to the configuring hostapd section.  If not, continue on. <span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span></p><p class="line867">
</p><h3 id="Download_and_compile_hostapd">Download and compile hostapd</h3>
<span class="anchor" id="line-41"></span><p class="line867"><em>Using hostapd with nl80211 requires you to have at least libnl-1.0 pre8 as this release introduced genl, Generic Netlink, which nl80211 relies on. Most distributions are shipping this or a later release by now. </em> To compile on fedora or other distibutions that separate out the headers from the binaries, you need the libnl-devel package. <span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span></p><p class="line874">Throughout this section, versions will be referred to by: x.y.z <span class="anchor" id="line-44"></span><span class="anchor" id="line-45"></span></p><p class="line874">ex: hostapd-0.6.8.tar.gz would be referred to as hostapd-x.y.z.tar.gz <span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span></p><p class="line867"><em>You can get the latest development version of hostapd from the git repository with: </em> <span class="anchor" id="line-48"></span><span class="anchor" id="line-49"></span></p><p class="line867"><span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span><span class="anchor" id="line-52"></span></p><pre><span class="anchor" id="line-1-2"></span>git clone git://w1.fi/srv/git/hostap.git
<span class="anchor" id="line-2-2"></span>cd hostap/hostapd</pre><span class="anchor" id="line-53"></span><p class="line862">Or you can get a stable release (0.6.8 or later reccomended) by downloading the tarball from <a class="http" href="http://w1.fi/hostapd/">http://w1.fi/hostapd/</a>. <span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span></p><p class="line867"><span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span><span class="anchor" id="line-58"></span><span class="anchor" id="line-59"></span></p><pre><span class="anchor" id="line-1-3"></span>wget http://w1.fi/releases/hostapd-x.y.z.tar.gz
<span class="anchor" id="line-2-3"></span>tar xzvf hostapd-x.y.z.tar.gz
<span class="anchor" id="line-3-2"></span>cd hostapd-x.y.z/hostapd</pre><span class="anchor" id="line-60"></span><p class="line874">Next, we need to configure the hostapd build to enable nl80211 driver support.  Copy defconfig to .config, and open it in your preferred text editor.  Also, there are other options that you may want to enable, like 802.11n support if your hardware can do it.  Most of the other encryption types and features aren't needed for most applications, so if you're questioning if you need to enable it, you probably don't need to. <span class="anchor" id="line-61"></span><span class="anchor" id="line-62"></span></p><p class="line867"><span class="anchor" id="line-63"></span><span class="anchor" id="line-64"></span><span class="anchor" id="line-65"></span></p><pre><span class="anchor" id="line-1-4"></span>cp defconfig .config
<span class="anchor" id="line-2-4"></span>vi .config</pre><span class="anchor" id="line-66"></span><p class="line874">Now find this line: <span class="anchor" id="line-67"></span><span class="anchor" id="line-68"></span></p><p class="line867"><span class="anchor" id="line-69"></span><span class="anchor" id="line-70"></span></p><pre><span class="anchor" id="line-1-5"></span>#CONFIG_DRIVER_NL80211=y</pre><span class="anchor" id="line-71"></span><p class="line874">and uncomment it by removing the '#' sign.  Repeat for other settings that you may be interested in.  The basic configuration, with only this line uncommented is enough to get hostapd up and running with WPA/WPA2 authentication and encryption. <span class="anchor" id="line-72"></span><span class="anchor" id="line-73"></span></p><p class="line874">Next, compile hostapd: <span class="anchor" id="line-74"></span><span class="anchor" id="line-75"></span></p><p class="line867"><span class="anchor" id="line-76"></span><span class="anchor" id="line-77"></span></p><pre><span class="anchor" id="line-1-6"></span>make</pre><span class="anchor" id="line-78"></span><p class="line874">if this fails with errors like: <span class="anchor" id="line-79"></span><span class="anchor" id="line-80"></span></p><p class="line867"><span class="anchor" id="line-81"></span><span class="anchor" id="line-82"></span><span class="anchor" id="line-83"></span><span class="anchor" id="line-84"></span><span class="anchor" id="line-85"></span><span class="anchor" id="line-86"></span></p><pre><span class="anchor" id="line-1-7"></span>driver_nl80211.c:21:31: warning: netlink/genl/genl.h: No such file or directory
<span class="anchor" id="line-2-5"></span>driver_nl80211.c:22:33: warning: netlink/genl/family.h: No such file or directory
<span class="anchor" id="line-3-3"></span>driver_nl80211.c:23:31: warning: netlink/genl/ctrl.h: No such file or directory
<span class="anchor" id="line-4-2"></span>driver_nl80211.c:24:25: warning: netlink/msg.h: No such file or directory
<span class="anchor" id="line-5-1"></span>driver_nl80211.c:25:26: warning: netlink/attr.h: No such file or directory</pre><span class="anchor" id="line-87"></span><p class="line874">you need to install/update libnl-1.0pre8 (or later).  If all goes well and the compilation finishes, try the minimal hostapd again, see the section Using your distributions hostapd above for that. <span class="anchor" id="line-88"></span><span class="anchor" id="line-89"></span></p><p class="line867"><span class="anchor" id="line-90"></span><span class="anchor" id="line-91"></span><span class="anchor" id="line-92"></span><span class="anchor" id="line-93"></span></p><pre><span class="anchor" id="line-1-8"></span>hostapd # ./hostapd ./hostapd-minimal.conf
<span class="anchor" id="line-2-6"></span>Configuration file: ./hostapd-minimal.conf
<span class="anchor" id="line-3-4"></span>Using interface wlan1 with hwaddr 00:0d:0b:cf:04:40 and ssid 'test'</pre><span class="anchor" id="line-94"></span><p class="line874">If that starts as the example here shows, you can move on to configuring hostapd.  If it fails to start with errors about the driver not being found, review the steps listed above for compiling hostapd again.  If it gets the error messages:  <span class="anchor" id="line-95"></span><span class="anchor" id="line-96"></span></p><p class="line867"><span class="anchor" id="line-97"></span><span class="anchor" id="line-98"></span><span class="anchor" id="line-99"></span><span class="anchor" id="line-100"></span><span class="anchor" id="line-101"></span><span class="anchor" id="line-102"></span></p><pre><span class="anchor" id="line-1-9"></span>Hardware does not support configured mode
<span class="anchor" id="line-2-7"></span>wlan0: IEEE 802.11 Hardware does not support configured mode (2)
<span class="anchor" id="line-3-5"></span>Could not select hw_mode and channel. (-2)
<span class="anchor" id="line-4-3"></span>wlan0: Unable to setup interface.
<span class="anchor" id="line-5-2"></span>rmdir[ctrl_interface]: No such file or directory</pre><span class="anchor" id="line-103"></span><span class="anchor" id="line-104"></span><p class="line874">then it means the hw_mode (a, b or g) in the config file is set to a value not supported by the hardware. <span class="anchor" id="line-105"></span><span class="anchor" id="line-106"></span></p><p class="line867">
</p><h2 id="Configuring_hostapd">Configuring hostapd</h2>
<span class="anchor" id="line-107"></span><p class="line867">
</p><h3 id="Establishing_Baseline_for_Configuration">Establishing Baseline for Configuration</h3>
<span class="anchor" id="line-108"></span><p class="line874">Before configuring hostapd, you need to know the capabilities of the clients that will be using it.  Not all clients will support all of the methods you may want to implement, so a baseline configuration needs to be established.  You will also want to do a survey of your area to find the channel that has the fewest other APs on it.  When choosing which channel to use, it is important to remember that the channels overlap with any channels that are within 20MHz. <span class="anchor" id="line-109"></span><span class="anchor" id="line-110"></span></p><p class="line874">Examples of the baseline you might establish: <span class="anchor" id="line-111"></span><span class="anchor" id="line-112"></span></p><p class="line867"><span class="anchor" id="line-113"></span><span class="anchor" id="line-114"></span><span class="anchor" id="line-115"></span><span class="anchor" id="line-116"></span></p><pre><span class="anchor" id="line-1-10"></span>Encryption: wpa-psk + tkip
<span class="anchor" id="line-2-8"></span>Wireless Mode: g
<span class="anchor" id="line-3-6"></span>Normal for an environment that has to support semi legacy devices, that don't support ccmp or wpa2</pre><span class="anchor" id="line-117"></span><p class="line867"><span class="anchor" id="line-118"></span><span class="anchor" id="line-119"></span><span class="anchor" id="line-120"></span><span class="anchor" id="line-121"></span></p><pre><span class="anchor" id="line-1-11"></span>Encryption: wpa2-psk + ccmp
<span class="anchor" id="line-2-9"></span>Wireless Mode: g+n
<span class="anchor" id="line-3-7"></span>Normal for an environment that has only up to date hardware and software</pre><span class="anchor" id="line-122"></span><p class="line867"><span class="anchor" id="line-123"></span><span class="anchor" id="line-124"></span><span class="anchor" id="line-125"></span><span class="anchor" id="line-126"></span></p><pre><span class="anchor" id="line-1-12"></span>Encryption: wep
<span class="anchor" id="line-2-10"></span>Wireless Mode: b
<span class="anchor" id="line-3-8"></span>This is the works case scenario, as wep is broken and can be trivially cracked.  Don't consider this as anything more than keeping casual free loaders out.</pre><span class="anchor" id="line-127"></span><p class="line874">Once you've found your baseline, it's time to edit hostapd.conf.  The configuration options will be broken into 3 sections: <span class="anchor" id="line-128"></span><span class="anchor" id="line-129"></span></p><p class="line867"><span class="anchor" id="line-130"></span><span class="anchor" id="line-131"></span><span class="anchor" id="line-132"></span><span class="anchor" id="line-133"></span></p><pre><span class="anchor" id="line-1-13"></span>Common Options: options that you will probably want to set
<span class="anchor" id="line-2-11"></span>Additional Options: options that are likely useful to at least know you have
<span class="anchor" id="line-3-9"></span>Extra Options: options that you aren't likely to need for most setups</pre><span class="anchor" id="line-134"></span><p class="line867">
</p><h3 id="Common_Options">Common Options</h3>
<span class="anchor" id="line-135"></span><p class="line874">The most basic set of options for using hostapd with the nl80211 driver have already been provided as the hostapd-minimal.conf.  That is all you need if you don't care about consistantly being on the same channel, don't need/want encryption, and don't need a flashy name.  However, that is not a realistic idea in the real world. <span class="anchor" id="line-136"></span><span class="anchor" id="line-137"></span></p><p class="line874">First, we'll setup the wireless interface settings, then the wireless environment settings, and finally the authentication and encryption. <span class="anchor" id="line-138"></span><span class="anchor" id="line-139"></span></p><p class="line867">
</p><h4 id="Wireless_Interface">Wireless Interface</h4>
<span class="anchor" id="line-140"></span><p class="line874">Setting Summary: <span class="anchor" id="line-141"></span><span class="anchor" id="line-142"></span></p><ul><li>interface: Tells hostapd what wireless interface to use <span class="anchor" id="line-143"></span></li><li>bridge: Set to a bridge if the wireless interface in use is part of a network bridge interface <span class="anchor" id="line-144"></span></li><li>driver: For our purposes, always nl80211 <span class="anchor" id="line-145"></span><span class="anchor" id="line-146"></span></li></ul><p class="line874">If you only have 1 wireless interface, and it's going to be bridged with a wired interface, a good example setup would be: <span class="anchor" id="line-147"></span><span class="anchor" id="line-148"></span></p><p class="line867"><span class="anchor" id="line-149"></span><span class="anchor" id="line-150"></span><span class="anchor" id="line-151"></span><span class="anchor" id="line-152"></span></p><pre><span class="anchor" id="line-1-14"></span>interface=wlan0
<span class="anchor" id="line-2-12"></span>bridge=br0
<span class="anchor" id="line-3-10"></span>driver=nl80211</pre><span class="anchor" id="line-153"></span><p class="line867">
</p><h4 id="Wireless_Environment">Wireless Environment</h4>
<span class="anchor" id="line-154"></span><p class="line874">Setting Summary: <span class="anchor" id="line-155"></span><span class="anchor" id="line-156"></span></p><ul><li><p class="line862">ssid: Sets the name (SSID = service set identifier) of the network, wireless extensions/iwconfig incorrectly calls this "<em>essid</em>". <span class="anchor" id="line-157"></span></p></li><li>hw_mode: Sets the operating mode of the interface, and the allowed channels.  Valid values depend on hardware, but are always a subset of a, b, g <span class="anchor" id="line-158"></span></li><li>channel: Sets the channel for hostapd to operate on.  Must be a channel supported by the mode set in hw_mode, as well as allowed by your countries Wireless Regulatory rules. <span class="anchor" id="line-159"></span><span class="anchor" id="line-160"></span></li></ul><p class="line874">The ssid is just for ease of configuration.  It is what shows up in scan results, and can help in configuring your clients.  Check the scan results for your area and choose a name. <span class="anchor" id="line-161"></span><span class="anchor" id="line-162"></span></p><p class="line874">hw_mode needs to be something that all of your hardware supports.  Setting this to 'g' is probably the most common setup, and also enables backwards compatability with 802.11b devices.  Note, this is not where you enable 802.11n support, as 802.11n operates on top of 802.11a or 802.11g's functionality. <span class="anchor" id="line-163"></span><span class="anchor" id="line-164"></span></p><p class="line874">channel should be chosen so that it has the minimum overlap with other APs or other networks in your area.  802.11 channels are 20mhz (4  channels) wide in total, or 10mhz (2 channels) wide on each side.  This means that an access point on channel 3 will interfere with an acces point on channel 1 or channel 5.  Use this to pick a channel.  Most consumer APs default to channel 6, so you can use channel 1 or channel 11 in most cases for the best results.  Also note that the channels available to you depends heavily entirerly on the local regulatory rules. <span class="anchor" id="line-165"></span><span class="anchor" id="line-166"></span></p><p class="line874">An example of a good normal setup is: <span class="anchor" id="line-167"></span><span class="anchor" id="line-168"></span></p><p class="line867"><span class="anchor" id="line-169"></span><span class="anchor" id="line-170"></span><span class="anchor" id="line-171"></span><span class="anchor" id="line-172"></span></p><pre><span class="anchor" id="line-1-15"></span>ssid=MyNetwork
<span class="anchor" id="line-2-13"></span>hw_mode=g
<span class="anchor" id="line-3-11"></span>channel=1</pre><span class="anchor" id="line-173"></span><p class="line874">802.11n Setting Summary <span class="anchor" id="line-174"></span><span class="anchor" id="line-175"></span></p><p class="line874">802.11n builds on the settings above, and adds additional functionality.  If your hardware doesn't support 802.11n, or you don't plan on using it, you can ignore these. <span class="anchor" id="line-176"></span><span class="anchor" id="line-177"></span></p><ul><li>ieee80211n: Set to 1 to enable 802.11n support, 0 to disable it <span class="anchor" id="line-178"></span></li><li>ht_capab: A list of the 802.11n features supported by your device <span class="anchor" id="line-179"></span><span class="anchor" id="line-180"></span></li></ul><p class="line874">The explanation of these settings in the sample config file are quite helpful, so I'll suggest reading those.  You can use the command 'iw list' to find a short list of the capabilities of your device. <span class="anchor" id="line-181"></span><span class="anchor" id="line-182"></span></p><p class="line874">Example settings: <span class="anchor" id="line-183"></span><span class="anchor" id="line-184"></span></p><p class="line867"><span class="anchor" id="line-185"></span><span class="anchor" id="line-186"></span><span class="anchor" id="line-187"></span><span class="anchor" id="line-188"></span></p><pre><span class="anchor" id="line-1-16"></span>wme_enabled=1
<span class="anchor" id="line-2-14"></span>ieee80211n=1
<span class="anchor" id="line-3-12"></span>ht_capab=[HT40+][SHORT-GI-40][DSSS_CCK-40]</pre><span class="anchor" id="line-189"></span><p class="line867">
</p><h3 id="Authentication_and_Encryption">Authentication and Encryption</h3>
<span class="anchor" id="line-190"></span><p class="line874">There is a lot to the authentication and encryption options in hostapd.  This section will cover the basics as far as wep/wpa/wpa2 goes, as well as some of the other commonly used options. <span class="anchor" id="line-191"></span><span class="anchor" id="line-192"></span></p><p class="line874">Settings Summary: <span class="anchor" id="line-193"></span><span class="anchor" id="line-194"></span></p><ul><li>macaddr_acl: This controls mac address filtering.  Mac addresses are easily spoofed, so only consider the use of this to be augmenting other security measures you have in place. <span class="anchor" id="line-195"></span></li><li>auth_algs: This is a bit field where the first bit (1) is for open auth, the second bit (2) is for Shared key auth (wep) and both (3) is both. <span class="anchor" id="line-196"></span></li><li>ignore_broadcast_ssid: This enables/disables broadcasting the ssid. <span class="anchor" id="line-197"></span></li><li>wpa: This is a bitfield like auth_algs.  The first bit enables wpa1 (1), the second bit enables wpa2 (2), and bothe enables both (3) <span class="anchor" id="line-198"></span></li><li>wpa_psk/wpa_passphrase: These establish what the pre-shared key will be for wpa authentication. <span class="anchor" id="line-199"></span></li><li>wpa_key_mgmt: This controls what key management algorithms a client can authenticate with. <span class="anchor" id="line-200"></span></li><li>wpa_pairwise: This controls wpa's data encryption <span class="anchor" id="line-201"></span></li><li>rsn_pairwise: This controls wpa2's data encryption <span class="anchor" id="line-202"></span><span class="anchor" id="line-203"></span></li></ul><p class="line874">First, scratch macaddr_acl and ignore_broadcast_ssid from your priorities as they only enhance security (and even then, only slightly).  Also, WEP has been effectively broken now, so unless you HAVE to support wep, scratch that from your list.  This just leaves wpa/wpa2.  Per the draft standard, wpa2 is required for 802.11n, and as there are known attacks on wpa now, wpa2 is the recommended authentication and encryption suite to use.  Fortunately, you can have both enabled at once.  If Windows clients are going to be connecting, you should leave ccmp encryption out of the wpa_pairwise option, as some windows drivers have problems with systems that enable it. <span class="anchor" id="line-204"></span><span class="anchor" id="line-205"></span></p><p class="line862">A good starting point for a wpa &amp; wpa2 enabled access point is: <span class="anchor" id="line-206"></span><span class="anchor" id="line-207"></span></p><p class="line867"><span class="anchor" id="line-208"></span><span class="anchor" id="line-209"></span><span class="anchor" id="line-210"></span><span class="anchor" id="line-211"></span><span class="anchor" id="line-212"></span><span class="anchor" id="line-213"></span><span class="anchor" id="line-214"></span><span class="anchor" id="line-215"></span><span class="anchor" id="line-216"></span></p><pre><span class="anchor" id="line-1-17"></span>macaddr_acl=0
<span class="anchor" id="line-2-15"></span>auth_algs=1
<span class="anchor" id="line-3-13"></span>ignore_broadcast_ssid=0
<span class="anchor" id="line-4-4"></span>wpa=3
<span class="anchor" id="line-5-3"></span>wpa_passphrase=YourPassPhrase
<span class="anchor" id="line-6"></span>wpa_key_mgmt=WPA-PSK
<span class="anchor" id="line-7"></span>wpa_pairwise=TKIP
<span class="anchor" id="line-8"></span>rsn_pairwise=CCMP</pre><span class="anchor" id="line-217"></span><p class="line874">If, alternately, you just want to support wpa2, you could use something like: <span class="anchor" id="line-218"></span><span class="anchor" id="line-219"></span></p><p class="line867"><span class="anchor" id="line-220"></span><span class="anchor" id="line-221"></span><span class="anchor" id="line-222"></span><span class="anchor" id="line-223"></span><span class="anchor" id="line-224"></span><span class="anchor" id="line-225"></span><span class="anchor" id="line-226"></span><span class="anchor" id="line-227"></span><span class="anchor" id="line-228"></span></p><pre><span class="anchor" id="line-1-18"></span>macaddr_acl=0
<span class="anchor" id="line-2-16"></span>auth_algs=1
<span class="anchor" id="line-3-14"></span>ignore_broadcast_ssid=0
<span class="anchor" id="line-4-5"></span>wpa=2
<span class="anchor" id="line-5-4"></span>wpa_passphrase=YourPassPhrase
<span class="anchor" id="line-6-1"></span>wpa_key_mgmt=WPA-PSK
<span class="anchor" id="line-7-1"></span>wpa_pairwise=TKIP
<span class="anchor" id="line-8-1"></span>rsn_pairwise=CCMP</pre><span class="anchor" id="line-229"></span><p class="line874">That should be all of the settings that you'll need to change for a basic, secure, access point using hostapd with an AP enabled mac80211 driver. <span class="anchor" id="line-230"></span><span class="anchor" id="line-231"></span></p><p class="line867">
</p><h3 id="Additional_Options">Additional Options</h3>
<span class="anchor" id="line-232"></span><span class="anchor" id="line-233"></span><p class="line867">
</p><h3 id="Extra_Options">Extra Options</h3>
<span class="anchor" id="line-234"></span><p class="line867">
</p><h4 id="Dynamic_VLAN_tagging">Dynamic VLAN tagging</h4>
<span class="anchor" id="line-235"></span><span class="anchor" id="line-236"></span><p class="line862">hostapd can be configured to move STAs into separate VLANs based on RADIUS tunnel attributes (as specified in RFC3580, <a class="http" href="http://tools.ietf.org/html/rfc3580#section-3.31">http://tools.ietf.org/html/rfc3580#section-3.31</a>): <span class="anchor" id="line-237"></span><span class="anchor" id="line-238"></span></p><p class="line867"><span class="anchor" id="line-239"></span><span class="anchor" id="line-240"></span><span class="anchor" id="line-241"></span><span class="anchor" id="line-242"></span></p><pre><span class="anchor" id="line-1-19"></span>Tunnel-Type=VLAN (13)
<span class="anchor" id="line-2-17"></span>Tunnel-Medium-Type=802
<span class="anchor" id="line-3-15"></span>Tunnel-Private-Group-ID=VLANID</pre><span class="anchor" id="line-243"></span><span class="anchor" id="line-244"></span><p class="line874">To enable dynamic VLAN tagging the following options in hostapd.conf need to be set: <span class="anchor" id="line-245"></span><span class="anchor" id="line-246"></span><span class="anchor" id="line-247"></span><span class="anchor" id="line-248"></span></p><pre><span class="anchor" id="line-1-20"></span>dynamic_vlan=1
<span class="anchor" id="line-2-18"></span>vlan_file=/etc/hostapd.vlan</pre><span class="anchor" id="line-249"></span><p class="line874">A value of 0 disables dynamic VLAN tagging, a value of 1 allows dynamic VLAN tagging and a value of 2 will reject the authentication if the RADIUS server does not provide the appropriate tunnel attributes. <span class="anchor" id="line-250"></span><span class="anchor" id="line-251"></span></p><p class="line874">Furthermore, hostapd needs to know how the VLAN interfaces should be named, this is done through an additional config file as specified in vlan_file. <span class="anchor" id="line-252"></span><span class="anchor" id="line-253"></span></p><p class="line874">Example /etc/hostapd.vlan: <span class="anchor" id="line-254"></span><span class="anchor" id="line-255"></span><span class="anchor" id="line-256"></span><span class="anchor" id="line-257"></span></p><pre><span class="anchor" id="line-1-21"></span>1       wlan0.1
<span class="anchor" id="line-2-19"></span>*       wlan0.#</pre><span class="anchor" id="line-258"></span><span class="anchor" id="line-259"></span><p class="line874">This will create a wlan0.1 interface on top of wlan0 and move all STAs with the RADIUS supplied vlantag 1 to that interface. The second entry is used to dynamically create VLAN interfaces on top of wlan0, hostapd will create an interface wlan0.vlantag for each different vlantag as supplied by the RADIUS server. For example, if a STA associates and the RADIUS server attributes contain the vlantag 100 hostapd will create a wlan0.100 interface and map the STA to this new interface. <span class="anchor" id="line-260"></span><span class="anchor" id="bottom"></span></p></div></div>
<div id="bottombar">
<ul id="username"><li><a href="http://linuxwireless.org/en/users/Documentation/hostapd?action=print" rel="nofollow">Xem bản in</a></li><li><a href="http://linuxwireless.org/en/users/Documentation/hostapd?action=login" id="login" rel="nofollow">Đăng nhập</a></li><li><a href="http://linuxwireless.org/about">About this site</a></li></ul>
</div>
<div id="pagebottom"></div>
</div>

</div>


</body><span id="skype_highlighting_settings" display="none" autoextractnumbers="1"></span><object id="skype_plugin_object" location.href="http://linuxwireless.org/en/users/Documentation/hostapd" location.hostname="linuxwireless.org" style="position: absolute; visibility: hidden; left: -100px; top: -100px; " width="0" height="0" type="application/x-vnd.skype.click2call.chrome.5.7.0"></object></html>