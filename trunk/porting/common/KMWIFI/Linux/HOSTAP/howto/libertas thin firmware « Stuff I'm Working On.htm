<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0062)http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/ -->
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head profile="http://gmpg.org/xfn/11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	

	<title>libertas thin firmware « Stuff I'm Working On</title>

	<style type="text/css" media="screen">
		@import url( http://s0.wp.com/wp-content/themes/pub/silver-black/style.css?m=1352691612g );
	</style>

	<link rel="pingback" href="http://corysohrakoff.wordpress.com/xmlrpc.php">
	<link rel="alternate" type="application/rss+xml" title="Stuff I&#39;m Working On » Feed" href="http://corysohrakoff.wordpress.com/feed/">
<link rel="alternate" type="application/rss+xml" title="Stuff I&#39;m Working On » Comments Feed" href="http://corysohrakoff.wordpress.com/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="Stuff I&#39;m Working On » libertas thin firmware Tag Feed" href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/feed/">
<script src="./libertas thin firmware « Stuff I'm Working On_files/quant.js" async="" type="text/javascript"></script><script type="text/javascript">
/* <![CDATA[ */
function addLoadEvent(func){var oldonload=window.onload;if(typeof window.onload!='function'){window.onload=func;}else{window.onload=function(){oldonload();func();}}}
/* ]]> */
</script>
<link rel="stylesheet" href="./libertas thin firmware « Stuff I'm Working On_files/global.css" type="text/css">
<link rel="stylesheet" id="loggedout-subscribe-css" href="./libertas thin firmware « Stuff I'm Working On_files/widget.css" type="text/css" media="all">
<link rel="stylesheet" id="post-reactions-css" href="./libertas thin firmware « Stuff I'm Working On_files/style.css" type="text/css" media="all">
<script type="text/javascript" src="./libertas thin firmware « Stuff I'm Working On_files/jquery.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var LoggedOutFollow = {"invalid_email":"Your subscription did not succeed, please try again with a valid email address."};
/* ]]> */
</script>
<script type="text/javascript" src="./libertas thin firmware « Stuff I'm Working On_files/widget.js"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://corysohrakoff.wordpress.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://corysohrakoff.wordpress.com/wp-includes/wlwmanifest.xml"> 
<meta name="generator" content="WordPress.com">
<link rel="shortcut icon" type="image/x-icon" href="http://s2.wp.com/i/favicon.ico?m=1311976028g" sizes="16x16 24x24 32x32 48x48">
<link rel="icon" type="image/x-icon" href="http://s2.wp.com/i/favicon.ico?m=1311976028g" sizes="16x16 24x24 32x32 48x48">
<link rel="apple-touch-icon-precomposed" href="http://s0.wp.com/i/webclip.png?m=1311618113g">
<link rel="openid.server" href="http://corysohrakoff.wordpress.com/?openidserver=1">
<link rel="openid.delegate" href="http://corysohrakoff.wordpress.com/">
<link rel="search" type="application/opensearchdescription+xml" href="http://corysohrakoff.wordpress.com/osd.xml" title="Stuff I&#39;m Working On">
<link rel="search" type="application/opensearchdescription+xml" href="http://wordpress.com/opensearch.xml" title="WordPress.com">
	<style type="text/css">
	/* <![CDATA[ */
			/* ]]> */
	</style>
	<meta name="application-name" content="Stuff I&#39;m Working On"><meta name="msapplication-window" content="width=device-width;height=device-height"><meta name="msapplication-tooltip" content="Cory Sohrakoff"><meta name="msapplication-task" content="name=Subscribe;action-uri=http://corysohrakoff.wordpress.com/feed/;icon-uri=http://s2.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=Sign up for a free blog;action-uri=http://wordpress.com/signup/;icon-uri=http://s2.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=WordPress.com Support;action-uri=http://support.wordpress.com/;icon-uri=http://s2.wp.com/i/favicon.ico"><meta name="msapplication-task" content="name=WordPress.com Forums;action-uri=http://forums.wordpress.com/;icon-uri=http://s2.wp.com/i/favicon.ico"><link rel="stylesheet" type="text/css" href="./libertas thin firmware « Stuff I'm Working On_files/shThemeDefault.css"><link rel="stylesheet" type="text/css" id="gravatar-card-css" href="./libertas thin firmware « Stuff I'm Working On_files/hovercard.css"><link rel="stylesheet" type="text/css" id="gravatar-card-services-css" href="./libertas thin firmware « Stuff I'm Working On_files/services.css"><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/document_iterator.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/find_proxy.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/get_html_text.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/global_constants.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/name_injection_builder.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/number_injection_builder.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/string_finder.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/change_sink.js"></script><meta name="document_iterator.js"><meta name="find_proxy.js"><meta name="get_html_text.js"><meta name="global_constants.js"><meta name="name_injection_builder.js"><meta name="number_injection_builder.js"><meta name="string_finder.js"><meta name="change_sink.js"></head>

<body class="highlander-enabled highlander-light">
<div id="rap">
<h1 id="header"><a href="http://corysohrakoff.wordpress.com/">Stuff I'm Working On</a></h1>

<div id="content">
<!-- end header -->


<h2>September 13, 2011</h2>
<div class="post-6 post type-post status-publish format-standard hentry category-gumstix tag-ap-mode tag-gumstix-overo tag-hostapd tag-libertas-thin-firmware tag-libertas_tf_sdio" id="post-6">
	 <h3 class="storytitle">
			<a href="http://corysohrakoff.wordpress.com/2011/09/13/enabling-wifi-ap-mode-on-a-gumstix-overo/" title="Permalink to Enabling Wifi AP Mode on a Gumstix Overo" rel="bookmark">Enabling Wifi AP Mode on a Gumstix&nbsp;Overo</a>
		 </h3>
	<div class="meta">Filed under:  <a href="http://corysohrakoff.wordpress.com/category/gumstix/" title="View all posts in gumstix" rel="category tag">gumstix</a> — Tags: <a href="http://corysohrakoff.wordpress.com/tag/ap-mode/" rel="tag">ap mode</a>, <a href="http://corysohrakoff.wordpress.com/tag/gumstix-overo/" rel="tag">gumstix overo</a>, <a href="http://corysohrakoff.wordpress.com/tag/hostapd/" rel="tag">hostapd</a>, <a href="./libertas thin firmware « Stuff I'm Working On_files/libertas thin firmware « Stuff I'm Working On.htm" rel="tag">libertas thin firmware</a>, <a href="http://corysohrakoff.wordpress.com/tag/libertas_tf_sdio/" rel="tag">libertas_tf_sdio</a> —  corysohrakoff @ 11:38 </div>

	<div class="storycontent">
		<p>This guide demonstrates how to enable Wifi AP mode for a Gumstix Overo, running Linux Kerenel 3.0.3 and Ubuntu 10.04. Setting up AP mode has very little documentation, so I hope this helps to bridge the gap.</p>
<h2><strong>Get the required files</strong></h2>
<ol>
<li>Download the latest thin-firmware from dev.laptop.org. <a title="thin-firmware" href="http://dev.laptop.org/pub/firmware/libertas/thinfirm/lbtf_sdio-9.0.7.p4.bin">http://dev.laptop.org/pub/firmware/libertas/thinfirm/lbtf_sdio-9.0.7.p4.bin</a></li>
<li>Rename the file sd8686tf.bin</li>
<li>Get the required helper firmware from Marvell (SD-8686-LINUX26-SYSKT-9.70.3.p24-26409.P45-GPL)<a title="helper firmware" href="http://www.marvell.com/support/downloads/driverDownload.do?driverId=203&action=1"> http://www.marvell.com/support/downloads/driverDownload.do?driverId=203&amp;action=1</a></li>
<li>Extract the downloaded zip file, then extract SD-8686-FEDORA26FC6-SYSKT-GPL-9.70.3.p24-26409.P45.tar within it. Navigate to the FwImage directory.</li>
<li>Inside FwImage&nbsp;there is helper_sd.bin. Rename helper_sd.bin to sd8686_helper.bin and save it for later.</li>
<li>Get the libertas_tf_sdio driver. <a title="thin-firmware driver" href="http://dev.laptop.org/git/users/derosier/wireless-testing/">http://dev.laptop.org/git/users/derosier/wireless-testing/</a></li>
<li>Download the latest version of hostapd from: <a title="hostapd" href="http://hostap.epitest.fi/hostapd">http://hostap.epitest.fi/hostapd</a> (Dependencies: libssl-dev, libnl-dev)</li>
</ol>
<h2><strong>Driver set-up</strong></h2>
<p>To get the Libertas SDIO thin-firmware driver working, you need to build the modules&nbsp;for your kernel. If you’re using a script to build your kernel see the note below first.</p>
<p>Copy the directory libertas_tf in&nbsp;drivers/net/wireless/ from the driver source tree into your own kernel source tree.&nbsp;You must patch the file drivers/net/wireless/Kconfig to include the following after the “config LIBERTAS_THINFIRM_USB” section.</p>
<p></p><div id="highlighter_959176" class="syntaxhighlighter  "><div class="bar                                                                                                                                                                                                                              "><div class="toolbar"><a href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/#viewSource" title="view source" style="width: 16px; height: 16px; " class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_959176_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_959176" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1305451055g"></div><a href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/#printSource" title="print" style="width: 16px; height: 16px; " class="item printSource">print</a><a href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/#about" title="?" style="width: 16px; height: 16px; " class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">config LIBERTAS_THINFIRM_SDIO</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">tristate "Marvell Libertas 8686 SDIO 802.11b/g cards with thin firmware"</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">depends on LIBERTAS_THINFIRM &amp;&amp; MMC</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">---help---</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">A driver for Marvell Libertas 8686 SDIO devices and those that include</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">the 88W8686 core, such as the Wi2Wi devices. Special SDIO specific</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">firmware is required to use this driver, see the OLPC site for details:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>9</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">&lt;<a href="http://wiki.laptop.org/go/Thinfirm_1.5">http://wiki.laptop.org/go/Thinfirm_1.5</a>&gt;</code></td></tr></tbody></table></div></div></div><p></p>
<p>Prepare to build the kernel with the new modules. In menuconfig navigate to: Device Drivers—&gt;Network device support—&gt;Wireless LAN.</p>
<p>Select the following to build as modules.</p>
<ul>
<li>Marvell 8xxx Libertas WLAN driver support with thin firmware</li>
<li>Marvell Libertas 8686 SDIO 802.11b/g cards with thin firmware</li>
</ul>
<p>You should also ensure that Networking support—&gt;Wireless—&gt;Generic IEEE 802.11 Networking Stack (mac80211) is selected. I also took out the regular Marvell Libertas driver since I didn’t need its functionality. You may want to do the same.</p>
<h2><strong>NOTE:&nbsp;</strong>If you’re using a script to build your kernel, make sure it doesn’t replace the files you added to the source tree.</h2>
<p>If you’re using <a title="building Ubuntu from source" href="http://www.elinux.org/BeagleBoard_Ubuntu_%26_DSP_From_Sources">this guide</a>&nbsp;to build your kernel/filesystem. You will need to perform the following steps to get it working.</p>
<p>In build_kernel.sh comment out a few lines near the bottom of the file.</p>
<p></p><div id="highlighter_472286" class="syntaxhighlighter  "><div class="bar                                        "><div class="toolbar"><a href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/#viewSource" title="view source" style="width: 16px; height: 16px; " class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_472286_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_472286" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1305451055g"></div><a href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/#printSource" title="print" style="width: 16px; height: 16px; " class="item printSource">print</a><a href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/#about" title="?" style="width: 16px; height: 16px; " class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">dl_kernel</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">extract_kernel</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="plain">patch_kernel</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="plain">#copy_defconfig</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain">#make_menuconfig</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="plain">#make_uImage</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="plain">#make_modules</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content"><code class="plain">#make_headers</code></td></tr></tbody></table></div></div></div><p></p>
<p>Run build_kernel.sh to do the basic set-up for you. Afterwards, change the file in the same place to look like:</p>
<p></p><div id="highlighter_197427" class="syntaxhighlighter  "><div class="bar    "><div class="toolbar"><a href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/#viewSource" title="view source" style="width: 16px; height: 16px; " class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_197427_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_197427" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1305451055g"></div><a href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/#printSource" title="print" style="width: 16px; height: 16px; " class="item printSource">print</a><a href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/#about" title="?" style="width: 16px; height: 16px; " class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">#dl_kernel</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">#extract_kernel</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="plain">#patch_kernel</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="plain">copy_defconfig</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain">make_menuconfig</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="plain">make_uImage</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="plain">make_modules</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content"><code class="plain">make_headers</code></td></tr></tbody></table></div></div></div><p></p>
<p>Perform the driver set-up steps above and then run build_kernel again. This will build the kernel. Next, in build_deb.sh comment out a few lines near the bottom of the file.</p>
<p></p><div id="highlighter_624437" class="syntaxhighlighter  "><div class="bar  "><div class="toolbar"><a href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/#viewSource" title="view source" style="width: 16px; height: 16px; " class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_624437_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_624437" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1305451055g"></div><a href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/#printSource" title="print" style="width: 16px; height: 16px; " class="item printSource">print</a><a href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/#about" title="?" style="width: 16px; height: 16px; " class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">#dl_kernel</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">#extract_kernel</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="plain">#patch_kernel</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="plain">copy_defconfig</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain">#make_menuconfig</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="plain">make_deb</code></td></tr></tbody></table></div></div></div><p></p>
<p>Finally, run build_deb.sh</p>
<h2><strong>Firmware set-up</strong></h2>
<p>The thin-firmware and firmare helper must be placed in the /lib/firmware/ directory on the filesystem.&nbsp;Simply copy sd8686tf.bin and sd8686_helper.bin to /lib/firmware/ on the Gumstix filesystem.</p>
<h2><strong>hostapd set-up</strong></h2>
<p><strong></strong>The wireless interface cannot be manually set into AP mode, thus the hostapd software must be used.&nbsp;This involves natively compiling hostapd on the Gumstix Overo, so gcc and related tools&nbsp;are required to be installed. Cross-compilation has not been tested.</p>
<p>Copy the hostapd tarball to a suitable location on your Gumstix, extract it and navigate to the directory. Next, create the .config file.</p>
<p></p><div id="highlighter_887686" class="syntaxhighlighter nogutter  "><div class="bar"><div class="toolbar"><a href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/#viewSource" title="view source" style="width: 16px; height: 16px; " class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_887686_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_887686" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1305451055g"></div><a href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/#printSource" title="print" style="width: 16px; height: 16px; " class="item printSource">print</a><a href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/#about" title="?" style="width: 16px; height: 16px; " class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="content"><code class="plain">$ cd hostapd</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="plain">$ cp defconfig .config</code></td></tr></tbody></table></div></div></div><p></p>
<p>Edit the file by by uncommenting the line “#CONFIG_DRIVER_NL80211=y”, i.e. removing the #. Then, build the program and then install it (as root).</p>
<p></p><div id="highlighter_862309" class="syntaxhighlighter nogutter  "><div class="bar"><div class="toolbar"><a href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/#viewSource" title="view source" style="width: 16px; height: 16px; " class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_862309_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_862309" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1305451055g"></div><a href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/#printSource" title="print" style="width: 16px; height: 16px; " class="item printSource">print</a><a href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/#about" title="?" style="width: 16px; height: 16px; " class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="content"><code class="plain">$ make</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="plain"># make install</code></td></tr></tbody></table></div></div></div><p></p>
<p>Next you’ll want to set-up a configuration file for hostapd. In the directory that you just compiled hostapd, there is a sample hostapd.conf file you can use. Alternatively, here is a link to a basic&nbsp;<a title="hostapd.conf" href="http://dl.dropbox.com/u/41571818/hostapd.conf">hostapd.conf</a>&nbsp;file&nbsp;that will get the wireless up and running with no encryption and the SSID set to “gumstix”. You can learn more about configuration <a title="hostapd documentation" href="http://linuxwireless.org/en/users/Documentation/hostapd">here</a>.</p>
<p>Put the .conf file somewhere that makes sense, i.e. /etc/hostapd.conf.</p>
<h2><strong>Loose-ends</strong></h2>
<p><strong></strong>You probably want your wireless card to be put into AP mode when the Gumstix boots. Below is an example&nbsp;of how to do that. (This is not the only way to do this.)</p>
<p>Create/edit the file /etc/network/interfaces to look like below. The wireless&nbsp;part is what is important so if you have some custom configuration already done in&nbsp;this file just edit/copy the wireless part (wlan0).</p>
<p></p><div id="highlighter_112259" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/#viewSource" title="view source" style="width: 16px; height: 16px; " class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_112259_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_112259" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1305451055g"></div><a href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/#printSource" title="print" style="width: 16px; height: 16px; " class="item printSource">print</a><a href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/#about" title="?" style="width: 16px; height: 16px; " class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain"># /etc/network/interfaces</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">auto lo</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="plain">iface lo inet loopback</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="plain">auto eth0</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="plain">iface eth0 inet dhcp</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="plain">auto wlan0</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="plain">iface wlan0 inet static</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="plain">address 192.168.0.1</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="plain">netmask 255.255.255.0</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="plain">broadcast 192.168.0.255</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="plain">post-up /usr/local/bin/hostapd -B /etc/hostapd.conf</code></td></tr></tbody></table></div></div></div><p></p>
<p>The example also assigns a static IP address to the wireless card. If you don’t do this, the network won’t work. Wireless clients also must have static IP addresses assigned unless&nbsp;you run a DHCP server on the Gumstix to automatically assign clients IP addresses.&nbsp;In Ubuntu the package dhcp3-server will provide that functionality. Here is an example .conf file for a dhcp3 server.</p>
<p></p><div id="highlighter_920186" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/#viewSource" title="view source" style="width: 16px; height: 16px; " class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_920186_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_920186" menu="false" src="http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1305451055g"></div><a href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/#printSource" title="print" style="width: 16px; height: 16px; " class="item printSource">print</a><a href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/#about" title="?" style="width: 16px; height: 16px; " class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain"># /etc/dhcp3/dhcpd.conf</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">default-lease-time 600;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="plain">max-lease-time 7200;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="plain">option subnet-mask 255.255.255.0;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="plain">option broadcast-address 192.168.0.255;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="plain">option routers 192.168.0.1;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="plain">subnet 192.168.0.0 netmask 255.255.255.0 {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="plain">range 192.168.0.2 192.168.0.100;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p></p>
<p>With all this work done, your Gumstix should now be able to act as a Wifi access point!</p>
<div class="sharedaddy sd-sharing-enabled"></div>	</div>

	<div class="feedback">
                        <a href="http://corysohrakoff.wordpress.com/2011/09/13/enabling-wifi-ap-mode-on-a-gumstix-overo/#comments" title="Comment on Enabling Wifi AP Mode on a Gumstix Overo">Comments (2)</a>	</div>

</div>




<!-- begin footer -->
</div>


<!-- begin sidebar -->
<div id="menu">

<ul>

	<li class="pagenav">Pages:<ul><li class="page_item page-item-2"><a href="http://corysohrakoff.wordpress.com/about/">About</a></li>
</ul></li>	<li id="linkcat-1356" class="linkcat">Blogroll
	<ul class="xoxo blogroll">
<li><a href="http://en.forums.wordpress.com/">Discuss</a></li>
<li><a href="http://www.plinky.com/">Get Inspired</a></li>
<li><a href="http://polldaddy.com/">Get Polling</a></li>
<li><a href="http://en.support.wordpress.com/">Get Support</a></li>
<li><a href="http://learn.wordpress.com/">Learn WordPress.com</a></li>
<li><a href="http://theme.wordpress.com/">Theme Showcase</a></li>
<li><a href="http://planet.wordpress.org/">WordPress Planet</a></li>
<li><a href="http://en.blog.wordpress.com/">WordPress.com News</a></li>

	</ul>
</li>
	<li class="categories">Categories:<ul>	<li class="cat-item cat-item-4013384"><a href="http://corysohrakoff.wordpress.com/category/gumstix/" title="View all posts filed under gumstix">gumstix</a>
</li>
</ul></li> <li id="search">
   <label for="s">Search:</label>
   <form id="searchform" method="get" action="http://corysohrakoff.wordpress.com/">
	<div>
		<input type="text" name="s" id="s" size="15"><br>
		<input type="submit" value="Search">
	</div>
	</form>
 </li>
 <li id="archives">Archives: 	<ul>
	 	<li><a href="http://corysohrakoff.wordpress.com/2011/09/" title="September 2011">September 2011</a></li>
 	</ul>
 </li>
 <li id="meta">Meta: 	<ul>
		<li><a href="http://corysohrakoff.wordpress.com/wp-login.php?action=register">Register</a></li>		<li><a href="http://corysohrakoff.wordpress.com/wp-login.php">Log in</a></li>
		<li><a href="http://corysohrakoff.wordpress.com/feed/" title="Syndicate this site using RSS"><abbr title="Really Simple Syndication">RSS</abbr></a></li>
		<li><a href="http://corysohrakoff.wordpress.com/comments/feed/" title="The latest comments to all posts in RSS">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
		<li><a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional">Valid <abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a></li>
		<li><a href="http://gmpg.org/xfn/"><abbr title="XHTML Friends Network">XFN</abbr></a></li>
		<li><a href="http://en.wordpress.com/signup?ref=footer_signup_clone&abt=1%3D2" rel="generator">Clone this site at WordPress.com</a></li>
			</ul>
 </li>

</ul>

</div>
<!-- end sidebar -->

<p class="credit">Theme: <a href="http://theme.wordpress.com/themes/silver-black/">Silver is the New Black</a>. <a href="http://en.wordpress.com/signup?ref=footer_signup_clone&abt=1%3D2" rel="generator">Clone this site at WordPress.com</a></p>

</div>

<script type="text/javascript" src="./libertas thin firmware « Stuff I'm Working On_files/gprofiles.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type="text/javascript" src="./libertas thin firmware « Stuff I'm Working On_files/wpgroho.js"></script>

<script type="text/javascript">
var _qevents = _qevents || [], wpcomQuantcastData = {"qacct":"p-18-mFEk4J448M","labels":",language.en,type.wpcom"};
function wpcomQuantcastPixel( labels, options ) {
	var i, defaults = wpcomQuantcastData, data = { event: 'ajax' };

	labels  = labels  || '';
	options = options || {};

	if ( typeof labels != 'string' )
		options = labels;

	for ( i in defaults ) {
		data[i] = defaults[i];
	}

	for ( i in options ) {
		data[i] = options[i];
	}

	if ( data.labels ) {
		data.labels += ',' + labels;
	} else {
		data.labels = labels;
	}

	_qevents.push( data );
};
(function() {var elem = document.createElement('script');elem.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";elem.async = true;elem.type = "text/javascript";var scpt = document.getElementsByTagName('script')[0];scpt.parentNode.insertBefore(elem, scpt);  })();
_qevents.push( wpcomQuantcastData );
</script>
<noscript>&lt;div style="display: none;"&gt;&lt;img src="//pixel.quantserve.com/pixel/p-18-mFEk4J448M.gif?labels=%2Clanguage.en%2Ctype.wpcom" height="1" width="1" alt="" /&gt;&lt;/div&gt;</noscript>

<script>jQuery(document).ready(function($){ Gravatar.profile_cb = function( h, d ) { WPGroHo.syncProfileData( h, d );	}; Gravatar.my_hash = WPGroHo.my_hash; Gravatar.init( 'body', '#wp-admin-bar-my-account' ); });</script>	<div style="display:none">
	</div>
		<style type="text/css">
			
				.reblog-from img                   { margin: 0 10px 0 0; vertical-align: middle; padding: 0; border: 0; }
				.reblogger-note img.avatar         { float: left; padding: 0; border: 0; }
				.reblogger-note-content            { margin: 0 0 20px 35px; }
				.reblog-post                       { border-left: 3px solid #eee; padding-left: 15px; }
				.reblog-post ul.thumb-list         { display: block; list-style: none; margin: 2px 0; padding: 0; clear: both; }
				.reblog-post ul.thumb-list li      { display: inline; margin: 0; padding: 0 1px; border: 0; }
				.reblog-post ul.thumb-list li a    { margin: 0; padding: 0; border: 0; }
				.reblog-post ul.thumb-list li img  { margin: 0; padding: 0; border: 0; }
				.reblog-post                       { border-left: 3px solid #eee; padding-left: 15px; }
					</style>	
	<div id="bit" class="loggedout-follow-normal" style="bottom: -235px; ">
		<a class="bsub" href="javascript:void(0)"><span id="bsub-text">Follow</span></a>
		<div id="bitsubscribe">
			
					<h3><label for="loggedout-follow-field">Follow “Stuff I'm Working On”</label></h3>
		
			<form action="https://subscribe.wordpress.com/" method="post" accept-charset="utf-8" id="loggedout-follow">
			<p>Get every new post delivered to your Inbox.</p>
			
			<p id="loggedout-follow-error" style="display: none;"></p>

					
			
			<p><input type="text" name="email" style="width: 95%; padding: 1px 2px" value="Enter your email address" onfocus="this.value=(this.value==&quot;Enter your email address&quot;) ? &quot;&quot; : this.value;" onblur="this.value=(this.value==&quot;&quot;) ? &quot;Enter email address&quot; : this.value;" id="loggedout-follow-field"></p>

			<input type="hidden" name="action" value="subscribe">
			<input type="hidden" name="blog_id" value="27403706">
			<input type="hidden" name="source" value="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/">
			<input type="hidden" name="sub-type" value="loggedout-follow">

			<input type="hidden" id="_wpnonce" name="_wpnonce" value="41cbd7cff6"><input type="hidden" name="_wp_http_referer" value="/tag/libertas-thin-firmware/">
			<p id="bsub-subscribe-button"><input type="submit" value="Sign me up"></p>
			</form>
					<div id="bsub-credit"><a href="http://wordpress.com/signup/?ref=lof">Powered by WordPress.com</a></div>
		</div><!-- #bitsubscribe -->
	</div><!-- #bit -->
<script type="text/javascript" src="./libertas thin firmware « Stuff I'm Working On_files/shCore.js"></script>
<script type="text/javascript" src="./libertas thin firmware « Stuff I'm Working On_files/shBrushPlain.js"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var themecssurl = "http://s0.wp.com/wp-content/plugins/syntaxhighlighter-wpcom/shThemeDefault.css?m=1349269507g&amp;ver=2.1.364b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		document.getElementsByTagName("head")[0].appendChild(themecss);
	})();
	SyntaxHighlighter.config.clipboardSwf = 'http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1305451055g';
	SyntaxHighlighter.config.strings.expandSource = 'show source';
	SyntaxHighlighter.config.strings.viewSource = 'view source';
	SyntaxHighlighter.config.strings.copyToClipboard = 'copy to clipboard';
	SyntaxHighlighter.config.strings.copyToClipboardConfirmation = 'The code is in your clipboard now';
	SyntaxHighlighter.config.strings.print = 'print';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.all();
</script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script><script src="./libertas thin firmware « Stuff I'm Working On_files/w.js" type="text/javascript"></script>
<script type="text/javascript">
st_go({'blog':'27403706','v':'wpcom','user_id':'0','subd':'corysohrakoff'});
ex_go({'crypt':'UE40eW5QN0p8M2Y/RE1LVmwrVi5vQS5fVFtfdHBbPyw1VXIrU3hWLHhzVndTdktBX0ddJnpXRjVaOTd6fj1YMX4ydzR4NTB6Qz9YLFBRWTFdSG15X0JwVHZ+Y1thbDhCKzROa2dOUmJMZ3N1LSxEd0NlcGh8am5CZ1p6Nll1ak9RLm5lTldVL00/X1N3SGVZb1A2LV9iR3YsZVl2W0F+RlFWNENpS1FENEVHY2RWfHBdajR4JTZ3V3MxLGExQlkyXX5zaUZ2VDNxM3gwJSt0Z3w4cks1MkRUV1R+M10wQ3NXfjhXPTZ5U2M1JnI0NA=='});
addLoadEvent(function(){linktracker_init('27403706',0);});
	</script><img id="wpstats" src="./libertas thin firmware « Stuff I'm Working On_files/g.gif" alt=""><img id="wpstats2" src="./libertas thin firmware « Stuff I'm Working On_files/g(1).gif" alt="" style="display:none">
<noscript>&lt;img src="http://stats.wordpress.com/b.gif?v=noscript" style="height:0px;width:0px;overflow:hidden" alt="" /&gt;</noscript>


</body><span id="skype_highlighting_settings" display="none" autoextractnumbers="1"></span><object id="skype_plugin_object" location.href="http://corysohrakoff.wordpress.com/tag/libertas-thin-firmware/" location.hostname="corysohrakoff.wordpress.com" style="position: absolute; visibility: hidden; left: -100px; top: -100px; " width="0" height="0" type="application/x-vnd.skype.click2call.chrome.5.7.0"></object></html>